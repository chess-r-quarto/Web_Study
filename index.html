<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Portal</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        // Babel Configuration for TSX
        Babel.registerPreset('tsx', {
            presets: [
                [Babel.availablePresets['typescript'], { isTSX: true, allExtensions: true }],
                Babel.availablePresets['react']
            ]
        });
    </script>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Noto Sans JP", sans-serif;
            -webkit-font-smoothing: antialiased;
        }
        
        /* Custom Scrollbar for Dark Mode */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb {
            background: #4B5563; /* tailwind gray-600 */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover { background: #6B7280; } /* tailwind gray-500 */
    </style>
</head>
<body class="bg-[#1C1C1E] text-gray-100 min-h-screen flex items-center justify-center m-0 p-4">
    <div id="root" class="w-full max-w-4xl h-[90vh]"></div>

    <script type="text/babel" data-presets="tsx">
        const { useState, useEffect } = React;

        // --- Types ---
        interface AppItem {
            name: string;
            file: string;
            icon: string;
            colorClass: string;
        }

        interface CategoryData {
            category: string;
            items: AppItem[];
        }

        // --- Data ---
        const APP_DATA: CategoryData[] = [
            {
                category: "Development & Utilities",
                items: [
                    { name: "HTML to MD", file: "html_to_md.html", icon: "FileText", colorClass: "bg-blue-500" },
                    { name: "JSON Downloader", file: "json_downloader.html", icon: "Download", colorClass: "bg-cyan-500" },
                    { name: "PDF to MD", file: "pdf_to_md.html", icon: "FileDown", colorClass: "bg-red-500" },
                    { name: "Thread Scraper", file: "thread_scraper.html", icon: "Globe", colorClass: "bg-indigo-500" },
                    { name: "Legal Compiler", file: "legal_compiler.html", icon: "Scale", colorClass: "bg-gray-600" },
                    { name: "Legal Compiler TS", file: "legal_compiler_ts.html", icon: "Scale", colorClass: "bg-purple-600" }
                ]
            },
            {
                category: "Data Science & Management",
                items: [
                    { name: "Data Mgmt", file: "Data_Management.html", icon: "Database", colorClass: "bg-gray-500" }
                ]
            },
            {
                category: "Financial Planning (FP1)",
                items: [
                    { name: "Dividend Calc", file: "FP1_Dividend_Calc.html", icon: "Calculator", colorClass: "bg-orange-500" },
                    { name: "Corporate Tax", file: "FP1_cor_tax_matrix.html", icon: "Building2", colorClass: "bg-pink-600" },
                    { name: "FP1 FAR", file: "FP1_FAR.html", icon: "Briefcase", colorClass: "bg-blue-600" },
                    { name: "FP1 Pension", file: "FP1_Pension.html", icon: "Users", colorClass: "bg-green-600" },
                    { name: "FP1 Portfolio", file: "FP1_Portfolio.html", icon: "PieChart", colorClass: "bg-purple-500" },
                    { name: "FP1 Asset Value", file: "FP1_asset_value.html", icon: "Gem", colorClass: "bg-emerald-500" },
                    { name: "FP1 Sell Buy", file: "FP1_sell_buy.html", icon: "TrendingUp", colorClass: "bg-amber-500" },
                    { name: "FP1 Inheritance", file: "FP1_souzoku.html", icon: "ScrollText", colorClass: "bg-pink-500" }
                ]
            },
            {
                category: "Language",
                items: [
                    { name: "English Word", file: "English_Word.html", icon: "Languages", colorClass: "bg-orange-400" }
                ]
            }
        ];

        // --- Components ---
        const TrafficLights = () => (
            <div className="flex gap-2 w-[60px]">
                <div className="w-3 h-3 rounded-full bg-[#FF5F57] border border-[#E0443E]"></div>
                <div className="w-3 h-3 rounded-full bg-[#FEBC2E] border border-[#D89E24]"></div>
                <div className="w-3 h-3 rounded-full bg-[#28C840] border border-[#1AAB29]"></div>
            </div>
        );

        const ModuleItem = ({ item }: { item: AppItem }) => {
            useEffect(() => {
                lucide.createIcons();
            }, []);

            const ext = item.file.includes('.') ? item.file.split('.').pop() : 'app';

            return (
                <a 
                    href={item.file} 
                    className="flex items-center p-3 bg-[#2C2C2E] border border-[#3A3A3C] rounded-xl text-gray-100 no-underline transition-all duration-200 hover:bg-[#3A3A3C] hover:border-blue-500 hover:-translate-y-[1px]"
                >
                    <div className={`w-9 h-9 rounded-lg mr-3 flex items-center justify-center text-white shrink-0 shadow-sm ${item.colorClass}`}>
                        <i data-lucide={item.icon} className="w-5 h-5"></i>
                    </div>
                    <div className="flex flex-col overflow-hidden">
                        <span className="text-[13px] font-medium whitespace-nowrap overflow-hidden text-ellipsis">
                            {item.name}
                        </span>
                        <span className="text-[10px] text-gray-400">
                            {ext}
                        </span>
                    </div>
                </a>
            );
        };

        const App = () => {
            return (
                <div className="w-full h-full bg-[#2C2C2E] rounded-[12px] shadow-2xl flex flex-col border border-[#3A3A3C] overflow-hidden">
                    {/* Title Bar */}
                    <div className="h-[52px] bg-[#2C2C2E] flex items-center px-4 border-b border-[#3A3A3C] shrink-0">
                        <TrafficLights />
                        <div className="flex-1 text-center text-[13px] font-semibold text-gray-400 mr-[60px]">
                            Study Modules Portal
                        </div>
                    </div>
                    
                    {/* Content Area */}
                    <div className="p-6 md:p-8 overflow-y-auto flex-grow bg-[#1C1C1E]">
                        {APP_DATA.map((section, idx) => (
                            <div key={idx} className="mb-8 last:mb-0">
                                <div className="text-[12px] font-bold text-gray-400 uppercase tracking-wider mb-3 pl-1">
                                    {section.category}
                                </div>
                                <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                                    {section.items.map((item, itemIdx) => (
                                        <ModuleItem key={itemIdx} item={item} />
                                    ))}
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root') as HTMLElement);
        root.render(<App />);
    </script>
</body>
</html>
