<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Study Navigator</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React & ReactDOM -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Babel -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    Babel.registerPreset('tsx', {
      presets: [
        [Babel.availablePresets['typescript'], { isTSX: true, allExtensions: true }],
        Babel.availablePresets['react']
      ]
    });
  </script>

  <style>
    body {
      font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
    }
    
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #1E1E1E; }
    ::-webkit-scrollbar-thumb {
      background: #3E3E42;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover { background: #555555; }
  </style>
</head>
<body class="bg-[#1E1E1E] text-gray-200 h-screen w-screen overflow-hidden m-0">
  <div id="root" class="h-full w-full"></div>

  <script type="text/babel" data-presets="tsx">
    const { useState, useEffect } = React;

    // --- Types ---
    interface AppItem {
      name: string;
      file: string;
      icon: string;
      version: string;
      description: string;
    }

    interface CategoryData {
      category: string;
      items: AppItem[];
    }

    // --- Data ---
    const APP_DATA: CategoryData[] = [
      {
        category: "Development & Utilities",
        items: [
          { name: "HTML to MD", file: "html_to_md.html", icon: "FileText", version: "1.2.0", description: "Convert HTML documents into clean Markdown format automatically." },
          { name: "JSON Downloader", file: "json_downloader.html", icon: "Download", version: "1.0.1", description: "Utility to fetch, format, and download JSON data payloads." },
          { name: "PDF to MD", file: "pdf_to_md.html", icon: "FileDown", version: "2.1.0", description: "Extract text from PDF files and convert to structured Markdown." },
          { name: "Thread Scraper", file: "thread_scraper.html", icon: "Globe", version: "1.5.3", description: "Web scraping tool optimized for forum threads and discussions." },
          { name: "Legal Compiler", file: "legal_compiler.html", icon: "Scale", version: "3.0.0", description: "Compile and analyze legal documents using pattern recognition." },
          { name: "Legal Compiler TS", file: "legal_compiler_ts.html", icon: "Scale", version: "3.1.0", description: "TypeScript implementation of the Legal Compiler." }
        ]
      },
      {
        category: "Data Science & Management",
        items: [
          { name: "Data Mgmt", file: "Data_Management.html", icon: "Database", version: "1.0.0", description: "Core data management and relational database utility interface." }
        ]
      },
      {
        category: "Financial Planning (FP1)",
        items: [
          { name: "Dividend Calc", file: "FP1_Dividend_Calc.html", icon: "Calculator", version: "1.1.0", description: "Calculate dividend yields and projected returns." },
          { name: "Corporate Tax", file: "FP1_cor_tax_matrix.html", icon: "Building2", version: "2.0.1", description: "Matrix calculator for corporate tax estimations." },
          { name: "FP1 FAR", file: "FP1_FAR.html", icon: "Briefcase", version: "1.0.0", description: "Financial Accounting and Reporting analysis tool." },
          { name: "FP1 Pension", file: "FP1_Pension.html", icon: "Users", version: "1.3.2", description: "Pension calculation and retirement planning module." },
          { name: "FP1 Portfolio", file: "FP1_Portfolio.html", icon: "PieChart", version: "2.2.0", description: "Portfolio distribution and risk assessment visualization." },
          { name: "FP1 Asset Value", file: "FP1_asset_value.html", icon: "Gem", version: "1.1.5", description: "Real-time asset valuation and depreciation tracking." },
          { name: "FP1 Sell Buy", file: "FP1_sell_buy.html", icon: "TrendingUp", version: "1.4.0", description: "Algorithmic sell/buy indicator and simulation environment." },
          { name: "FP1 Inheritance", file: "FP1_souzoku.html", icon: "ScrollText", version: "2.0.0", description: "Inheritance tax calculation and distribution planning." }
        ]
      },
      {
        category: "Language",
        items: [
          { name: "English Word", file: "English_Word.html", icon: "Languages", version: "1.0.0", description: "Vocabulary training and linguistic flashcard application." }
        ]
      }
    ];

    // --- Components ---
    const SidebarItem = ({ icon, label, isActive, onClick }: { icon: string, label: string, isActive: boolean, onClick: () => void }) => (
      <button
        onClick={onClick}
        className={`w-full flex items-center gap-3 px-6 py-3 text-sm transition-colors ${
          isActive 
            ? "bg-[#2D2D30] text-[#43B02A] border-l-4 border-[#43B02A]" 
            : "text-gray-400 hover:bg-[#2D2D30] hover:text-gray-200 border-l-4 border-transparent"
        }`}
      >
        <i data-lucide={icon} className="w-5 h-5"></i>
        <span className="font-medium">{label}</span>
      </button>
    );

    const AppCard = ({ item }: { item: AppItem }) => {
      const handleLaunch = () => {
        window.location.href = item.file;
      };

      return (
        <div className="bg-[#252526] border border-[#3E3E42] rounded shadow-sm flex flex-col h-[280px] p-5 hover:border-[#43B02A] transition-colors group relative">
          <div className="flex items-center justify-center w-16 h-16 mx-auto bg-[#1E1E1E] rounded-full mb-4 group-hover:bg-[#2D2D30] transition-colors">
            <i data-lucide={item.icon} className="w-8 h-8 text-[#43B02A]"></i>
          </div>
          
          <div className="text-center mb-1">
            <h3 className="text-[16px] font-semibold text-gray-100">{item.name}</h3>
            <p className="text-[11px] text-gray-500 mt-1">{item.version}</p>
          </div>
          
          <p className="text-[13px] text-gray-400 mt-2 mb-4 flex-grow text-center overflow-hidden" style={{ display: '-webkit-box', WebkitLineClamp: 3, WebkitBoxOrient: 'vertical' }}>
            {item.description}
          </p>
          
          <button 
            onClick={handleLaunch}
            className="w-full bg-[#0071C5] hover:bg-[#005A9E] text-white py-1.5 rounded text-[13px] font-medium transition-colors"
          >
            Launch
          </button>
        </div>
      );
    };

    const App = () => {
      const [activeCategory, setActiveCategory] = useState<string>("Home");

      // Initialize Lucide icons on render and category change
      useEffect(() => {
        lucide.createIcons();
      }, [activeCategory]);

      const categories = ["Home", ...APP_DATA.map(d => d.category)];
      
      const displayedItems = activeCategory === "Home" 
        ? APP_DATA.flatMap(d => d.items)
        : APP_DATA.find(d => d.category === activeCategory)?.items || [];

      return (
        <div className="flex h-screen w-full bg-[#1E1E1E]">
          {/* Sidebar */}
          <div className="w-64 bg-[#181818] border-r border-[#333333] flex flex-col shrink-0">
            {/* Brand Logo Area */}
            <div className="h-16 flex items-center px-6 border-b border-[#333333]">
              <div className="w-8 h-8 bg-[#43B02A] rounded-full flex items-center justify-center mr-3">
                <i data-lucide="compass" className="w-5 h-5 text-white"></i>
              </div>
              <span className="text-lg font-bold text-gray-100 tracking-wide">Navigator</span>
            </div>

            {/* Navigation Menu */}
            <div className="flex-1 py-4 overflow-y-auto">
              <SidebarItem 
                icon="home" 
                label="Home" 
                isActive={activeCategory === "Home"} 
                onClick={() => setActiveCategory("Home")} 
              />
              <div className="px-6 py-3 text-[11px] font-bold text-gray-500 uppercase tracking-wider mt-2">
                Environments
              </div>
              {APP_DATA.map((section, idx) => (
                <SidebarItem 
                  key={idx}
                  icon="box" 
                  label={section.category} 
                  isActive={activeCategory === section.category} 
                  onClick={() => setActiveCategory(section.category)} 
                />
              ))}
            </div>

            {/* Footer / Status */}
            <div className="p-4 border-t border-[#333333] text-[11px] text-gray-500">
              Study Navigator v2.0.0<br/>
              Â© 2026 Portal
            </div>
          </div>

          {/* Main Content */}
          <div className="flex-1 flex flex-col min-w-0">
            {/* Top Bar */}
            <div className="h-16 bg-[#1E1E1E] border-b border-[#333333] flex items-center px-8 justify-between shrink-0">
              <h1 className="text-xl font-medium text-gray-100">
                {activeCategory === "Home" ? "Applications on base (root)" : `Applications in ${activeCategory}`}
              </h1>
              <div className="flex gap-4">
                <button className="text-gray-400 hover:text-gray-200">
                  <i data-lucide="settings" className="w-5 h-5"></i>
                </button>
                <button className="text-gray-400 hover:text-gray-200">
                  <i data-lucide="help-circle" className="w-5 h-5"></i>
                </button>
              </div>
            </div>

            {/* Application Grid */}
            <div className="flex-1 overflow-y-auto p-8 bg-[#1E1E1E]">
              <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">
                {displayedItems.map((item, idx) => (
                  <AppCard key={`${item.name}-${idx}`} item={item} />
                ))}
              </div>
              {displayedItems.length === 0 && (
                <div className="flex flex-col items-center justify-center h-full text-gray-500">
                  <i data-lucide="inbox" className="w-12 h-12 mb-4"></i>
                  <p>No applications found in this environment.</p>
                </div>
              )}
            </div>
          </div>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root') as HTMLElement);
    root.render(<App />);
  </script>
</body>
</html>
